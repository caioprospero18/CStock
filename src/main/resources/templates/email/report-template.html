<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { background: rgb(0, 128, 94); color: white; padding: 20px; text-align: center; }
        .summary { background: #f8f9fa; padding: 15px; margin: 20px 0; border-radius: 5px; }
        .table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .table th { background-color: rgb(0, 128, 94); color: white; }
        .positive { color: #333; font-weight: bold; }
        .negative { color: #333; font-weight: bold; }
        .footer { margin-top: 30px; padding: 20px; background: #ecf0f1; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
		<div class="header">
		    <h1 th:text="${report.reportType == 'DIARIO'} ? 
		        'Relatório Diário - ' + ${enterprise.enterpriseName} : 
		        'Relatório Mensal - ' + ${enterprise.enterpriseName}">
		        Relatório
		    </h1>
		    <p th:text="${enterprise.enterpriseName} + ' - ' + 
		        (${report.reportType == 'DIARIO'} ? 
		        'Relatório de movimentações do dia ' + ${#temporals.format(report.periodStartDate, 'dd/MM/yyyy')} : 
		        'Relatório mensal de ' + ${#temporals.format(report.periodStartDate, 'dd/MM/yyyy')} + ' a ' + ${#temporals.format(report.periodEndDate, 'dd/MM/yyyy')})">
		    </p>
		</div>
        
        <div class="summary">
            <h3>Resumo Financeiro</h3>
            <p><strong>Faturamento Total:</strong> 
                <span class="positive" th:text="${formatCurrency.format(report.totalRevenue)}">R$ 0,00</span>
            </p>
            <p><strong>Gastos Totais:</strong> 
                <span class="negative" th:text="${formatCurrency.format(report.totalExpenses)}">R$ 0,00</span>
            </p>
            <p><strong>Lucro Líquido:</strong> 
				<span th:class="${report.netProfit != null and report.netProfit.compareTo(T(java.math.BigDecimal).ZERO) >= 0} ? 'positive' : 'negative'"
				      th:text="${formatCurrency.format(report.netProfit)}">R$ 0,00</span>
            </p>
            <p><strong>Total de Entradas:</strong> <span th:text="${report.totalEntries}">0</span></p>
            <p><strong>Total de Saídas:</strong> <span th:text="${report.totalExits}">0</span></p>
        </div>
        
        <h3>Movimentações Detalhadas</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Produto</th>
					<th>Marca</th>
                    <th>Tipo</th>
                    <th>Quantidade</th>
                    <th>Valor Unitário</th>
                    <th>Valor Total</th>
                    <th>Data/Hora</th>
                    <th>Usuário</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="movement : ${report.movements}">
                    <td th:text="${movement.productName}">Produto</td>
					<td th:text="${movement.brand}">Marca</td>
                    <td>
                        <span th:if="${movement.movementType == 'ENTRADA'}" style="color: #333">Entrada</span>
                        <span th:if="${movement.movementType == 'SAÍDA'}" style="color: #333">Saída</span>
                    </td>
                    <td th:text="${movement.quantity}">0</td>
                    <td th:text="${formatCurrency.format(movement.unitPrice)}">R$ 0,00</td>
                    <td th:text="${formatCurrency.format(movement.totalValue)}">R$ 0,00</td>
                    <td th:text="${movement.movementDate}">00/00/0000 00:00</td>
                    <td th:text="${movement.userName}">Usuário</td>
                </tr>
            </tbody>
        </table>
        
        <div class="footer">
            <p><strong>CStock System</strong></p>
            <p>Relatório gerado automaticamente em <span th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy HH:mm')}"></span></p>
            <p><small>Este é um email automático, por favor não responda.</small></p>
        </div>
    </div>
</body>
</html>